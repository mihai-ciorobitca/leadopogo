<html>
<head>
    <title>
        Task {{task.scrape_info}}
    </title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/task.css') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<body>
<div class="main-container">
    <div class="task-profile-container">
        <h2>{{ task.scrape_info }}</h2>
        <div class="task-info">
            <p>Scraped Emails: {{ task.scraped_emails}} / {{ task.maximum_emails }}</p>
            <p id="type-id">Scraped Type: {{ task.scrape_type }}</p>
            <p id="status-id">Status: {{ task.status }}</p>
            <p>
                {% if task.download_sheet and task.scraped_emails|int > 0 %}
                <a href="{{task.download_sheet}}">Download Sheet</a>
                {% endif %}
            </p>
        </div>
        {% if task.scraped_emails == task.maximum_emails and check %}
        <form action="{{url_for('continue_task')}}" method="POST">
            <button type="submit" id="continueButton">Continue Scraping</button>
            <input type="hidden" name="task_id" value="{{ task.id }}">
        </form>
        {% endif %}
    </div>
</div>
<script>
    var statusId = document.getElementById("status-id");
    var status = statusId.innerHTML;
    if (status === "Status: P") {
        statusId.innerHTML = "Status: Pending";
    } else if (status === "Status: S") {
        statusId.innerHTML = "Status: Processing";
    } else if (status === "Status: C") {
        statusId.innerHTML = "Status: Complete";
    } else if (status === "Status: D") {
        statusId.innerHTML = "Status: Duplicated";
    } else if (status === "Status: I") {
        statusId.innerHTML = "Status: Invalid";
    } else if (status === "Status: N") {
        statusId.innerHTML = "Status: Not available now";
    }

    var typeId = document.getElementById("type-id");
    var type = typeId.innerHTML;
    if (type === "Scraped Type: FO") {
        typeId.innerHTML = "Scraped Type: Followings";
    } else if (type === "Scraped Type: FL") {
        typeId.innerHTML = "Scraped Type: Followers";
    } else if (type === "Scraped Type: HT") {
        typeId.innerHTML = "Scraped Type: Hashtags";
    } else if (type === "Scraped Type: CO") {
        typeId.innerHTML = "Scraped Type: Continue";
    }
    document.getElementById('continueButton').addEventListener('click', function(event) {
        event.preventDefault();
        alert("Continue is not available at the moment");
    });
</script>

</body>
</html>